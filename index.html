<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>DFifty Mapper Pro</title>
  <link rel="stylesheet" href="./styles.css">
</head>
<body class="df-body">
  <div class="df-app">

    <!-- LEFT SIDEBAR -->
    <aside class="df-sidebar">
      <button class="df-advanced-btn">+ ADVANCED</button>

      <div class="df-title-block">
        <div class="df-title">DFIFTY MAPPER PRO</div>
        <div class="df-subtitle">
          GO / GOD mode multi-surface mesh editor (4 → 32 pts, TD-ready JSON & CSV).
        </div>
      </div>

      <!-- SURFACES PANEL -->
      <section class="df-panel">
        <div class="df-panel-title">SURFACES</div>

        <label class="df-label">Active surface</label>
        <select id="active-surface" class="df-select"></select>

        <div class="df-row df-row-buttons">
          <button id="btn-add-surface" class="df-btn df-btn-primary">+ ADD SURFACE</button>
          <button id="btn-duplicate-surface" class="df-btn">DUPLICATE</button>
          <button id="btn-delete-surface" class="df-btn df-btn-danger">DELETE</button>
        </div>

        <label class="df-label">Name</label>
        <input id="surface-name" class="df-input" type="text" placeholder="e.g. Left Wall" />

        <label class="df-label">Color</label>
        <input id="surface-color" class="df-color" type="color" />

        <label class="df-label">Mesh detail</label>
        <select id="mesh-detail" class="df-select">
          <option value="4">4 pts (2 × 2)</option>
          <option value="8">8 pts (4 × 2)</option>
          <option value="16">16 pts (4 × 4)</option>
          <option value="32">32 pts (8 × 4)</option>
        </select>

        <div class="df-row df-row-flags">
          <label class="df-checkbox">
            <input id="surface-visible" type="checkbox" checked />
            <span>Visible</span>
          </label>
          <label class="df-checkbox">
            <input id="surface-locked" type="checkbox" />
            <span>Locked</span>
          </label>
          <label class="df-checkbox">
            <input id="surface-solo" type="checkbox" />
            <span>Solo</span>
          </label>
        </div>
      </section>

      <!-- SELECTED POINT PANEL -->
      <section class="df-panel">
        <div class="df-panel-title">SELECTED POINT</div>
        <label class="df-label">Index</label>
        <input id="selected-point-index" class="df-input" type="number" readonly />
        <label class="df-label">X</label>
        <input id="selected-point-x" class="df-input" type="number" step="0.001" />
        <label class="df-label">Y</label>
        <input id="selected-point-y" class="df-input" type="number" step="0.001" />
      </section>

      <!-- BOTTOM BAR (OPTIONAL) -->
      <div class="df-bottom-strip">
        <span class="df-status" id="status-line">Ready</span>
      </div>
    </aside>

    <!-- CENTER CANVAS -->
    <main class="df-main">
      <div class="df-toolbar">
        <label class="df-label-inline">Grid</label>
        <select id="grid-snap" class="df-select inline">
          <option value="0">Off</option>
          <option value="0.1">0.1</option>
          <option value="0.25" selected>0.25</option>
          <option value="0.5">0.5</option>
        </select>

        <div class="df-toolbar-spacer"></div>

        <button id="btn-save" class="df-btn small">Save</button>
        <button id="btn-load" class="df-btn small">Load</button>
        <button id="btn-export" class="df-btn small">Export</button>
      </div>

      <div class="df-canvas-wrap">
        <canvas id="mapperCanvas" width="1600" height="900"></canvas>
      </div>
    </main>

    <!-- RIGHT SIDEBAR -->
    <aside class="df-right">
      <section class="df-panel">
        <div class="df-panel-title">Inspector</div>
        <div id="inspector" class="df-inspector-body"></div>
      </section>

      <section class="df-panel">
        <div class="df-panel-title">Laser Preview</div>
        <canvas id="laserPreview" width="320" height="180"
                style="width:100%;border-radius:6px"></canvas>
      </section>
    </aside>
  </div>

  <!-- SCRIPT STACK (ROOT) -->
  <script src="./dfiftyCoreShim.js"></script>
  <script src="./wrapPoints.js"></script>
  <script src="./mappingEngine.js"></script>
  <script src="./lockGrid.js"></script>
  <script src="./renderer2d.js"></script>
  <script src="./gpuWarp.js"></script>
  <script src="./projectorManager.js"></script>
  <script src="./laserOutput.js"></script>
  <script src="./main.js"></script>
</body>
</html>
